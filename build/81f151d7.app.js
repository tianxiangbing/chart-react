webpackJsonp([1],{0:function(e,t,n){e.exports=n(91)},88:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(22),s=a(u),d=n(92),c=(a(d),n(90)),f=a(c),p=n(89),m=a(p);n(87);var h=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={list:null},n}return l(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;this.bindChart(),this.bindHeader();var t=new Date;setInterval(function(){e.bindHeader();var n=new Date;t.getDate()!=n.getDate()&&(t=n,e.bindChart())},1e4)}},{key:"bindHeader",value:function(){var e=this;fetch("/mock/header.json?"+ +new Date).then(function(e){return e.json()}).then(function(t){var n=t.data;n.installationsTotalUsers=n.installations_android+n.installations_ios,n.today_iosAdrTotal=n.today_active_users_android+n.today_active_users_ios,n.yesterday_iosAdrTotal=n.yesterday_active_users_android+n.yesterday_active_users_ios,n.diff_active=n.today_iosAdrTotal-n.yesterday_iosAdrTotal,n.yesterday_iosAdrAddTotal=n.yesterday_add_users_ios+n.yesterday_add_users_android,n.today_iosAdrAddTotal=n.today_add_users_ios+n.today_add_users_android,n.diff_add=n.today_iosAdrAddTotal-n.yesterday_iosAdrAddTotal,e.setState({header:n})})}},{key:"bindChart",value:function(){var e=this;fetch("/mock/chart.json?"+ +new Date).then(function(e){return e.json()}).then(function(t){console.log("parsed json",t);for(var n=[],a=[],r=0;r<t.data.length;r++){var o=t.data[r];n.push({month:o.date,tem:o.today_active_users_android,city:"android"}),n.push({month:o.date,tem:o.today_active_users_ios,city:"ios"}),n.push({month:o.date,tem:o.today_active_users_android+o.today_active_users_ios,city:"sum"}),a.push({month:o.date,tem:o.today_add_users_android,city:"android"}),a.push({month:o.date,tem:o.today_add_users_ios,city:"ios"}),a.push({month:o.date,tem:o.today_add_users_android+o.today_add_users_ios,city:"sum"})}e.setState({list1:n,list2:a}),console.log(n)})["catch"](function(e){console.log("parsing failed",e)})}},{key:"render",value:function(){return s["default"].createElement("div",{className:"body"},s["default"].createElement(f["default"],{info:this.state.header}),s["default"].createElement("div",{className:"c1"},s["default"].createElement("div",{className:"sp_title"}," 单位（万/人） "),s["default"].createElement(m["default"],{height:"730",width:"930",unit:"w",list:this.state.list1}),s["default"].createElement("h2",null,"日活趋势图")),s["default"].createElement("div",{className:"c2"},s["default"].createElement("dl",null,s["default"].createElement("dt",{className:"dt-1"},"总趋势",s["default"].createElement("i",null)),s["default"].createElement("dt",{className:"dt-2"},"Android",s["default"].createElement("i",null)),s["default"].createElement("dt",{className:"dt-3"},"iOS",s["default"].createElement("i",null))),s["default"].createElement("div",{className:"sp_title"}," 单位（人） "),s["default"].createElement(m["default"],{height:"480",width:"650",list:this.state.list2}),s["default"].createElement("h2",null,"新增趋势")))}}]),t}(s["default"].Component);t["default"]=h},89:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(22),s=a(u),d=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={},n}return l(t,e),i(t,[{key:"componentDidUpdate",value:function(e,t){if(console.log(e),JSON.stringify(this.props.list)!=JSON.stringify(e.list)&&null!=this.props.list&&0!=this.props.list.length){var n=this,a=new Date,r=(a.getFullYear(),a.getMonth(),a.getDate(),[]);r=this.props.list;var o=(G2.Stat,G2.Frame),l=new o(r),i=new G2.Chart({container:this.refs.chart,width:this.props.width,height:this.props.height}),u={month:{formatter:function(e){var t=new Date(e),n=t.getDate();return n==a.getDate()-1&&a.getMonth()==t.getMonth()?"昨天":1==n?t.getMonth()+"月"+n+"日":n},alias:" "},tem:{formatter:function(e){return"w"==n.props.unit?Math.floor(e/1e4)+"w":e},alias:" "},city:{type:"cat",alias:"昨天",values:["1321454","564562","198929"]}};i.source(l,u),i.area().position("month*tem").color("city").shape("smooth"),i.render()}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s["default"].createElement("div",{ref:"chart"})}}]),t}(s["default"].Component);t["default"]=d},90:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(22),s=a(u),d=n(93),c=(a(d),function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return l(t,e),i(t,[{key:"renderDayActive",value:function(){return this.props.info?this.props.info.diff_active>0?s["default"].createElement("div",{className:"item up-down up"},s["default"].createElement("span",null,this.props.info.today_iosAdrTotal,s["default"].createElement("em",null),s["default"].createElement("i",null,"+",this.props.info.diff_active)),s["default"].createElement("s",null),s["default"].createElement("p",null,"日活总数VS昨天同时段")):s["default"].createElement("div",{className:"item up-down down"},s["default"].createElement("span",null,this.props.info.today_iosAdrTotal,s["default"].createElement("em",null),s["default"].createElement("i",null,this.props.info.diff_active)),s["default"].createElement("s",null),s["default"].createElement("p",null,"日活总数VS昨天同时段")):void 0}},{key:"renderDayAdd",value:function(){return this.props.info?this.props.info.diff_add>0?s["default"].createElement("div",{className:"item up-down up"},s["default"].createElement("span",null,this.props.info.today_iosAdrAddTotal,s["default"].createElement("em",null),s["default"].createElement("i",null,"+",this.props.info.diff_add)),s["default"].createElement("s",null),s["default"].createElement("p",null,"日新增总量VS昨天同时段")):s["default"].createElement("div",{className:"item up-down down"},s["default"].createElement("span",null,this.props.info.today_iosAdrAddTotal,s["default"].createElement("em",null),s["default"].createElement("i",null,this.props.info.diff_add)),s["default"].createElement("s",null),s["default"].createElement("p",null,"日新增总量VS昨天同时段")):void 0}},{key:"render",value:function(){return s["default"].createElement("div",{id:"Header"},s["default"].createElement("div",{className:"item"},s["default"].createElement("span",null,this.props.info&&this.props.info.installationsTotalUsers),s["default"].createElement("s",null),s["default"].createElement("p",null,"激活总数")),s["default"].createElement("div",{className:"item"},s["default"].createElement("span",null,"17,268"),s["default"].createElement("s",null),s["default"].createElement("p",null,"月活总量（往前30天）")),this.renderDayActive(),this.renderDayAdd())}}]),t}(s["default"].Component));t["default"]=c},91:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(22),o=a(r),l=n(52),i=n(88),u=a(i);(0,l.render)(o["default"].createElement(u["default"],null),document.getElementById("app"))},92:function(e,t){"use strict"},93:function(e,t){"use strict"}});